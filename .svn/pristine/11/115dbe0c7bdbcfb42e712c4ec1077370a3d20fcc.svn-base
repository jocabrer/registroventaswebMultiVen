/*
SQLyog Job Agent v12.09 (64 bit) Copyright(c) Webyog Inc. All Rights Reserved.


MySQL - 5.6.33 : Database - ef3c71v0_rvweb
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`ef3c71v0_rvweb` /*!40100 DEFAULT CHARACTER SET latin1 */;

USE `ef3c71v0_rvweb`;

/*Table structure for table `cabecera` */

DROP TABLE IF EXISTS `cabecera`;

CREATE TABLE `cabecera` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_cliente` int(11) DEFAULT NULL,
  `estadoActual` int(11) DEFAULT NULL,
  `fecha_ingreso` datetime DEFAULT NULL,
  `conFactura` tinyint(1) DEFAULT '1' COMMENT '0 false 1 true',
  `comision` tinyint(1) DEFAULT '0' COMMENT '0 false 1 true',
  PRIMARY KEY (`id`),
  KEY `id_cliente` (`id_cliente`),
  KEY `estadoActual` (`estadoActual`),
  CONSTRAINT `cabecera_ibfk_1` FOREIGN KEY (`id_cliente`) REFERENCES `cliente` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6008 DEFAULT CHARSET=utf8;

/*Data for the table `cabecera` */

insert  into `cabecera` values (5864,261,200,'2017-09-25 11:59:59',0,1),(5865,259,201,'2017-09-25 11:59:59',1,1),(5866,262,194,'2017-09-25 11:59:59',0,0),(5867,263,199,'2017-09-25 11:59:59',0,1),(5868,264,215,'2017-09-26 11:59:59',0,1),(5869,265,204,'2017-09-28 11:59:59',0,1),(5870,266,214,'2017-10-02 11:59:59',0,1),(6000,267,202,'2017-10-04 11:59:59',0,1),(6001,268,203,'2017-10-02 11:59:59',0,1),(6002,269,217,'2017-10-05 11:59:59',0,1),(6003,270,216,'2017-10-03 11:59:59',0,1),(6004,271,207,'2017-10-05 11:59:59',0,1),(6005,272,213,'2017-10-05 11:59:59',0,0),(6006,273,212,'2017-10-06 11:59:59',0,0),(6007,274,211,'2017-10-02 11:59:59',0,0);

/*Table structure for table `cambioestado` */

DROP TABLE IF EXISTS `cambioestado`;

CREATE TABLE `cambioestado` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'identificador',
  `id_cabecera` int(11) NOT NULL COMMENT 'Cabecera a la cual pertenece',
  `estado` int(11) NOT NULL COMMENT 'estado que representa',
  `fecha` datetime NOT NULL COMMENT 'fecha de inserccion',
  `id_usuario` int(11) unsigned NOT NULL COMMENT 'identificacion del pc que actualizo',
  PRIMARY KEY (`id`,`id_cabecera`),
  KEY `id_cabecera` (`id_cabecera`),
  KEY `cambioestado_fk` (`estado`),
  KEY `ce_user` (`id_usuario`),
  CONSTRAINT `cambioestado_fk` FOREIGN KEY (`estado`) REFERENCES `estado` (`id`),
  CONSTRAINT `cambioestado_ibfk_1` FOREIGN KEY (`id_cabecera`) REFERENCES `cabecera` (`id`),
  CONSTRAINT `ce_user` FOREIGN KEY (`id_usuario`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=218 DEFAULT CHARSET=utf8;

/*Data for the table `cambioestado` */

insert  into `cambioestado` values (184,5864,0,'2017-09-25 12:03:51',1),(185,5864,1,'2017-09-25 12:06:20',1),(186,5864,1,'2017-09-25 12:06:34',1),(187,5864,1,'2017-09-25 12:06:43',1),(188,5865,1,'2017-09-25 12:09:47',1),(189,5865,1,'2017-09-25 12:09:51',1),(190,5866,1,'2017-09-25 12:11:40',1),(191,5867,1,'2017-09-25 20:36:29',1),(192,5868,1,'2017-09-26 10:45:18',1),(193,5869,0,'2017-09-28 22:45:20',1),(194,5866,3,'2017-09-28 23:01:17',1),(195,5864,2,'2017-10-02 09:21:53',1),(196,5865,2,'2017-10-02 09:22:17',1),(197,5867,2,'2017-10-02 09:22:44',1),(198,5870,0,'2017-10-02 11:14:32',1),(199,5867,3,'2017-10-04 10:28:05',1),(200,5864,3,'2017-10-04 10:28:27',1),(201,5865,3,'2017-10-04 10:28:41',1),(202,6000,1,'2017-10-04 11:13:56',1),(203,6001,1,'2017-10-05 09:46:14',1),(204,5869,3,'2017-10-05 09:58:36',1),(205,6002,0,'2017-10-05 11:10:49',1),(206,6003,2,'2017-10-05 12:20:56',1),(207,6004,1,'2017-10-05 12:38:34',1),(208,6005,1,'2017-10-05 22:29:21',1),(209,6006,0,'2017-10-05 23:57:17',1),(210,6007,1,'2017-10-06 11:09:21',1),(211,6007,2,'2017-10-06 11:09:41',1),(212,6006,1,'2017-10-06 11:25:20',1),(213,6005,3,'2017-10-06 17:49:53',1),(214,5870,3,'2017-10-06 19:30:46',1),(215,5868,3,'2017-10-06 20:19:59',1),(216,6003,3,'2017-10-06 21:02:37',1),(217,6002,1,'2017-10-06 21:03:03',1);

/*Table structure for table `cliente` */

DROP TABLE IF EXISTS `cliente`;

CREATE TABLE `cliente` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'numero de cliente',
  `nombre` varchar(100) CHARACTER SET latin1 DEFAULT NULL COMMENT 'nombre cliente',
  `nombre2` varchar(250) CHARACTER SET latin1 DEFAULT NULL,
  `correo1` varchar(100) CHARACTER SET latin1 DEFAULT NULL,
  `correo2` varchar(100) CHARACTER SET latin1 DEFAULT NULL,
  `fono1` varchar(15) CHARACTER SET latin1 DEFAULT NULL,
  `fono2` varchar(15) CHARACTER SET latin1 DEFAULT NULL,
  `giro` varchar(60) CHARACTER SET latin1 DEFAULT NULL,
  `rut` varchar(10) CHARACTER SET latin1 DEFAULT NULL,
  `domicilio` varchar(100) CHARACTER SET latin1 DEFAULT NULL,
  `comuna` varchar(100) CHARACTER SET latin1 DEFAULT NULL,
  `observaciones` text CHARACTER SET latin1,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=275 DEFAULT CHARSET=utf8;

/*Data for the table `cliente` */

insert  into `cliente` values (257,'johnny henriquez','','admjahb@gmail.com','','','','','','','',''),(258,'Emilio Varela Diaz','','','','','','','','','Curanilahue',''),(259,'Nancy Margarita Hidalgo Alfaro','','','','','','','','AVDA LAS AMERICAS 3935 B','',''),(260,'Maria Cristina Mac Kay Musac','','mariacristinamackay@gmail.com','','','','','','','',''),(261,'Luis Leal','','luisleal28633@gmail.com','','+56955323366','','','16287066-1','','','OficinaÂ concepciÃ³n. Tucapel 530Â es mi direcciÃ³n. Pero enviÃ© por tur bus. Retiro en sucursal.Â '),(262,'Luis Gomez Ramos','','vaviluchile@gmail.com','','','','','','','',''),(263,'Ricardo Oyarzun','','royarzun@laflorida.cl','','','','','','','',''),(264,'Yohana Contreras','','yohanacontreras9@gmail.com','','','','','','','',''),(265,'Omar CarreÃ±o Soto','','','','+569942362090','','','','','',''),(266,'Carlos andres lepe ortiz','','carloslepeortiz@gmail.com','','+56975955310','','','','','',''),(267,'Pamela Guajardo','','pamela_guajardo@hotmail.com','','','','','','','',''),(268,'Solange Del Carmen Ramirez Jorquera','','solanch12_1@hotmail.com ','','995460761','','','','','',''),(269,'Mauricio sofanor leon hernandez','','mleon@e-center.cl','','','','','','','',''),(270,'Rossana','','nany_76@live.cl','','930318264','','','','','',''),(271,'Katherine Oraya Huenchuleo','','Katherine_hc@live.com','','','','','','','',''),(272,'Johny Rivero Cabas','JEANNETTE DE LOURDE PARDO SOTOMAYOR','albert.maquinariasgastronomica@gmail.com ','','32-3217085','','','','','',''),(273,'Francisca fabiola zambra zambra','','','','','','','','','',''),(274,'Francisco luco squella ','','franciscoluco@yahoo.com','','','','','','','','');

/*Table structure for table `comentarios` */

DROP TABLE IF EXISTS `comentarios`;

CREATE TABLE `comentarios` (
  `id_comentario` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id_comentario',
  `id_cabecera` int(11) NOT NULL COMMENT 'Pedido de los comentarios.',
  `id_user` int(11) unsigned NOT NULL COMMENT 'Creador del comentario.',
  `estado` int(11) NOT NULL COMMENT 'Estado del comentario activado o desactivado',
  `fecha_creacion` datetime NOT NULL COMMENT 'Fecha de creaciòn',
  `comentario` text COMMENT 'Comentario',
  PRIMARY KEY (`id_comentario`),
  KEY `56gffg` (`id_cabecera`),
  KEY `fkusercomentario` (`id_user`),
  CONSTRAINT `56gffg` FOREIGN KEY (`id_cabecera`) REFERENCES `cabecera` (`id`),
  CONSTRAINT `fkusercomentario` FOREIGN KEY (`id_user`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=103 DEFAULT CHARSET=utf8;

/*Data for the table `comentarios` */

insert  into `comentarios` values (101,5869,1,3,'2017-10-05 09:58:28','numero de envio 909 090 571'),(102,6005,1,1,'2017-10-06 17:49:23','enviado');

/*Table structure for table `cuenta` */

DROP TABLE IF EXISTS `cuenta`;

CREATE TABLE `cuenta` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `Nombre` varchar(200) DEFAULT NULL,
  `Numero` varchar(50) DEFAULT NULL,
  `Entidad` varchar(50) DEFAULT NULL,
  `Tipo` varchar(20) DEFAULT NULL,
  `Obs` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

/*Data for the table `cuenta` */

insert  into `cuenta` values (1,'Jose Cabrera','1','VEN1','1',NULL),(2,'Eduardo Cabrera','2','PRO','2',NULL),(3,'Vanesa Gutierrez','3','VEN2','1',NULL),(4,'Ingreso','0','ING','0',NULL);

/*Table structure for table `detalle` */

DROP TABLE IF EXISTS `detalle`;

CREATE TABLE `detalle` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_cabecera` int(11) NOT NULL,
  `cantidad` int(11) DEFAULT NULL,
  `valor_cli` double DEFAULT NULL,
  `costo` double DEFAULT NULL,
  `id_producto` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `id_cabecera` (`id_cabecera`),
  KEY `detalle_prod` (`id_producto`),
  CONSTRAINT `detalle_ibfk_1` FOREIGN KEY (`id_cabecera`) REFERENCES `cabecera` (`id`),
  CONSTRAINT `detalle_prod` FOREIGN KEY (`id_producto`) REFERENCES `producto` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=694 DEFAULT CHARSET=utf8;

/*Data for the table `detalle` */

insert  into `detalle` values (672,5864,3,12000,9000,15),(673,5865,6,10000,6000,5),(674,5866,14,12000,9000,4),(675,5867,1,25000,10000,16),(676,5868,2,12000,9000,4),(677,5868,2,12000,9000,17),(678,5869,2,7000,2500,18),(679,5869,1,5000,1500,20),(680,5869,1,7000,2500,19),(681,5869,1,22000,15000,9),(682,5870,4,12000,9000,21),(683,6000,15,11000,6000,22),(685,6001,1,13500,9000,23),(686,6002,1,13500,10000,24),(687,6000,1,7000,4000,25),(688,6000,1,7000,4000,26),(689,6003,4,12000,9000,3),(690,6004,40,11000,6000,27),(691,6005,10,11000,9000,3),(692,6006,6,10000,6000,2),(693,6007,2,13500,9000,28);

/*Table structure for table `estado` */

DROP TABLE IF EXISTS `estado`;

CREATE TABLE `estado` (
  `id` int(11) NOT NULL,
  `descripcion` varchar(50) DEFAULT NULL,
  `vigente` int(11) DEFAULT NULL,
  `secuencia` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `estado` */

insert  into `estado` values (0,'Ingresado',1,0),(1,'En Fabricacion',1,1),(2,'Esperando Entrega',1,2),(3,'Entregado',1,3);

/*Table structure for table `feriados` */

DROP TABLE IF EXISTS `feriados`;

CREATE TABLE `feriados` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nombre` varchar(500) CHARACTER SET latin1 DEFAULT NULL,
  `fecha` date DEFAULT NULL,
  `diadelagno` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=32 DEFAULT CHARSET=utf8;

/*Data for the table `feriados` */

insert  into `feriados` values (1,'01 de Enero	Año Nuevo','2014-01-01',1),(2,'Santo Religioso	Ley 2.977','2014-04-18',108),(3,'Santo	Religioso	Ley 2.977','2014-04-19',109),(4,'Día Nacional del Trabajo','2014-05-01',121),(5,'Día de las Glorias Navales	Civil	Ley 2.977','2014-05-21',141),(6,'San Pedro y San Pablo	Religioso	Ley 2.977','2014-06-29',180),(7,'Día de la Virgen del Carmen	Religioso	Ley 20.148','2014-07-16',197),(8,'Asunción de la Virgen	Religioso	Ley 2.977','2014-08-15',227),(9,'Independencia Nacional','2014-09-18',261),(10,'Día de las Glorias del Ejército','2014-09-19',262),(11,'Encuentro de Dos Mundos	Civil	Ley 3.810','2014-10-12',285),(12,'Día de las Iglesias Evangélicas y Protestantes	Religioso	Ley 20.299','2014-10-31',304),(13,'Día de Todos los Santos	Religioso	Ley 2.977','2014-11-01',305),(14,'Inmaculada Concepción	Religioso	Ley 2.977','2014-12-08',342),(15,'Navidad','2014-12-25',359),(16,'Año Nuevo','2013-01-01',1),(17,'Viernes Santo	Religioso	Ley 2.977','2013-03-29',88),(18,'Sábado Santo	Religioso	Ley 2.977','2013-03-30',89),(19,'Día Nacional del Trabajo','2013-05-01',121),(20,'Día de las Glorias Navales	Civil	Ley 2.977','2013-05-21',141),(21,'San Pedro y San Pablo	Religioso	Ley 2.977','2013-06-29',180),(22,'Elecciones Primarias	Civil	Ley 20.640','2013-06-30',181),(23,'Día de la Virgen del Carmen	Religioso	Ley 20.148','2013-07-16',197),(24,'Asunción de la Virgen	Religioso	Ley 2.977','2013-08-15',227),(25,'Independencia Nacional','2013-09-18',261),(26,'Día de las Glorias del Ejército','2013-09-19',262),(27,'Fiestas Patrias	Civil	Ley 20.215','2013-09-20',263),(28,'Encuentro de Dos Mundos	Civil	Ley 3.810','2013-10-12',285),(29,'Día de las Iglesias Evangélicas y Protestantes	Religioso	Ley 20.299','2013-10-31',304),(30,'Día de Todos los Santos	Religioso	Ley 2.977','2013-11-01',305),(31,'Navidad','2013-12-25',359);

/*Table structure for table `groups` */

DROP TABLE IF EXISTS `groups`;

CREATE TABLE `groups` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  `description` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

/*Data for the table `groups` */

insert  into `groups` values (1,'admin','Administrator'),(2,'members','General User');

/*Table structure for table `login_attempts` */

DROP TABLE IF EXISTS `login_attempts`;

CREATE TABLE `login_attempts` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `ip_address` varchar(15) NOT NULL,
  `login` varchar(100) NOT NULL,
  `time` int(11) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `login_attempts` */

/*Table structure for table `movimiento_ctas` */

DROP TABLE IF EXISTS `movimiento_ctas`;

CREATE TABLE `movimiento_ctas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_cabecera` int(11) DEFAULT NULL,
  `id_cuenta` int(11) DEFAULT NULL,
  `monto` double DEFAULT NULL,
  `fecha_ingreso` datetime DEFAULT NULL,
  `glosa` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `id_cabecera` (`id_cabecera`),
  KEY `movimiento_ctas_ctas1` (`id_cuenta`),
  CONSTRAINT `movimiento_ctas_ctas1` FOREIGN KEY (`id_cuenta`) REFERENCES `cuenta` (`id`),
  CONSTRAINT `movimiento_ctas_ibfk_1` FOREIGN KEY (`id_cabecera`) REFERENCES `cabecera` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1012 DEFAULT CHARSET=utf8;

/*Data for the table `movimiento_ctas` */

insert  into `movimiento_ctas` values (906,5864,4,17500,'2017-09-25 12:05:56','Ingreso Abono'),(907,5864,1,17500,'2017-09-25 12:05:56','Ingreso Abono'),(908,5865,4,71400,'2017-09-25 12:10:47','Pago total'),(909,5865,1,71400,'2017-09-25 12:10:47','Pago total'),(910,5866,4,100000,'2017-09-25 12:12:39','Ingreso abono'),(911,5866,1,100000,'2017-09-25 12:12:39','Ingreso abono'),(912,5864,2,13000,'2017-09-25 13:03:30','Abono desde cuenta 1 GLOSA:abono papÃ¡ '),(913,5864,1,-13000,'2017-09-25 13:03:30','REFno.912 Cargo transferido a cuenta 2 GLOSA:abono papÃ¡ '),(916,5867,4,12500,'2017-09-25 20:37:07','Abono ingreso'),(917,5867,1,12500,'2017-09-25 20:37:07','Abono ingreso'),(918,5867,2,10000,'2017-09-25 20:37:23','Abono desde cuenta 1 GLOSA:Abono ingreso'),(919,5867,1,-10000,'2017-09-25 20:37:23','REFno.918 Cargo transferido a cuenta 2 GLOSA:Abono ingreso'),(927,5865,2,47400,'2017-09-26 01:01:26','Abono desde la cuenta Eduardo Cabrera, obs:Abono papÃ¡'),(928,5865,1,-47400,'2017-09-26 01:01:26','REFno.927 Monto transferido hacia la cuenta de : Jose Cabrera obs:Abono papÃ¡'),(929,5868,4,26000,'2017-09-26 10:48:30','Abono inicial'),(930,5868,1,26000,'2017-09-26 10:48:30','Abono inicial'),(931,5868,3,6000,'2017-09-26 14:12:07','Abono desde la cuenta Vanesa Gutierrez, obs:Comision pagada'),(932,5868,1,-6000,'2017-09-26 14:12:07','REFno.931 Monto transferido hacia la cuenta de : Jose Cabrera obs:Comision pagada'),(933,5864,3,4500,'2017-09-26 14:12:35','Abono desde la cuenta Vanesa Gutierrez, obs:Comision pagada'),(934,5864,1,-4500,'2017-09-26 14:12:35','REFno.933 Monto transferido hacia la cuenta de : Jose Cabrera obs:Comision pagada'),(935,5865,3,12000,'2017-09-26 14:13:06','Abono desde la cuenta Vanesa Gutierrez, obs:Comision pagada'),(936,5865,1,-12000,'2017-09-26 14:13:06','REFno.935 Monto transferido hacia la cuenta de : Jose Cabrera obs:Comision pagada'),(937,5867,3,7500,'2017-09-26 14:13:43','Abono desde la cuenta Vanesa Gutierrez, obs:Comision pagada'),(938,5867,1,-7500,'2017-09-26 14:13:43','REFno.937 Monto transferido hacia la cuenta de : Jose Cabrera obs:Comision pagada'),(939,5869,4,41000,'2017-09-28 22:52:40','Ingreso abono'),(940,5869,1,41000,'2017-09-28 22:52:40','Ingreso abono'),(944,5864,4,18000,'2017-10-02 09:21:38','Paga saldo '),(945,5864,1,18000,'2017-10-02 09:21:38','Paga saldo '),(946,5870,4,48000,'2017-10-02 11:14:58','Pago por adelantado'),(947,5870,1,48000,'2017-10-02 11:14:58','Pago por adelantado'),(948,5867,4,12500,'2017-10-02 16:40:28','Pagado'),(949,5867,1,12500,'2017-10-02 16:40:28','Pagado'),(963,5866,2,60000,'2017-10-02 22:36:42','Abono desde la cuenta Jose Cabrera, obs:abono papa'),(964,5866,1,-60000,'2017-10-02 22:36:42','REF.963 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:abono papa'),(965,5866,2,68000,'2017-10-02 22:37:16','Pago saldo'),(966,5866,4,68000,'2017-10-02 22:37:16','Pago saldo'),(967,5866,1,2000,'2017-10-02 22:44:40','Abono desde la cuenta Eduardo Cabrera, obs:Pago papa'),(968,5866,2,-2000,'2017-10-02 22:44:40','REF.967 Monto transferido hacia la cuenta de : Jose Cabrera obs:Pago papa'),(969,5864,2,14000,'2017-10-02 22:48:37','Abono desde la cuenta Jose Cabrera, obs:Saldo pedido 3 de 58x68'),(970,5864,1,-14000,'2017-10-02 22:48:37','REF.969 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:Saldo pedido 3 de 58x68'),(973,5864,4,500,'2017-10-02 22:50:17','saldo cliente'),(974,5864,1,500,'2017-10-02 22:50:17','saldo cliente'),(975,5869,2,24000,'2017-10-02 22:55:49','Abono desde la cuenta Jose Cabrera, obs:Pago papa'),(976,5869,1,-24000,'2017-10-02 22:55:49','REF.975 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:Pago papa'),(977,5870,2,36000,'2017-10-02 22:57:06','Abono desde la cuenta Jose Cabrera, obs:pago papa'),(978,5870,1,-36000,'2017-10-02 22:57:06','REF.977 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:pago papa'),(979,6000,4,89500,'2017-10-04 11:16:01','Abono inicial'),(980,6000,1,89500,'2017-10-04 11:16:01','Abono inicial'),(982,6001,4,6750,'2017-10-05 09:46:43','Abono inicial'),(983,6001,1,6750,'2017-10-05 09:46:43','Abono inicial'),(984,6002,4,7000,'2017-10-05 11:11:15','Abono'),(985,6002,1,7000,'2017-10-05 11:11:15','Abono'),(986,5868,4,26000,'2017-10-05 11:30:29','Saldo'),(987,5868,1,26000,'2017-10-05 11:30:29','Saldo'),(988,6003,4,48000,'2017-10-05 12:21:35','Abono inicial'),(989,6003,1,48000,'2017-10-05 12:21:35','Abono inicial'),(990,6003,2,36000,'2017-10-05 12:21:52','Abono desde la cuenta Jose Cabrera, obs:Pago'),(991,6003,1,-36000,'2017-10-05 12:21:52','REF.990 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:Pago'),(992,6004,4,220000,'2017-10-05 12:41:00','Abono inicial'),(993,6004,1,220000,'2017-10-05 12:41:00','Abono inicial'),(994,6004,3,50000,'2017-10-05 15:52:59','Abono desde la cuenta Jose Cabrera, obs:Pago comisiÃ³n'),(995,6004,1,-50000,'2017-10-05 15:52:59','REF.994 Monto transferido hacia la cuenta de : Vanesa Gutierrez obs:Pago comisiÃ³n'),(996,6004,2,120000,'2017-10-05 22:00:33','Abono desde la cuenta Jose Cabrera, obs:Abono papÃ¡'),(997,6004,1,-120000,'2017-10-05 22:00:33','REF.996 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:Abono papÃ¡'),(998,6000,2,50000,'2017-10-05 22:02:41','Abono desde la cuenta Jose Cabrera, obs:abono papÃ¡'),(999,6000,1,-50000,'2017-10-05 22:02:41','REF.998 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:abono papÃ¡'),(1000,5868,2,36000,'2017-10-05 22:03:49','Abono desde la cuenta Jose Cabrera, obs:Abono papa'),(1001,5868,1,-36000,'2017-10-05 22:03:49','REF.1000 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:Abono papa'),(1002,6006,4,30000,'2017-10-05 23:57:52','Abonado'),(1003,6006,1,30000,'2017-10-05 23:57:52','Abonado'),(1004,6005,4,110000,'2017-10-06 11:03:46','Pago Total'),(1005,6005,1,110000,'2017-10-06 11:03:46','Pago Total'),(1006,6005,2,90000,'2017-10-06 17:49:43','Abono desde la cuenta Jose Cabrera, obs:Pago papÃ¡'),(1007,6005,1,-90000,'2017-10-06 17:49:43','REF.1006 Monto transferido hacia la cuenta de : Eduardo Cabrera obs:Pago papÃ¡'),(1008,5869,4,7000,'2017-10-06 17:50:48','pago saldo'),(1009,5869,1,7000,'2017-10-06 17:50:48','pago saldo'),(1010,6004,3,50000,'2017-10-08 13:34:39','Abono desde la cuenta Jose Cabrera, obs:Pago adelantado'),(1011,6004,1,-50000,'2017-10-08 13:34:39','REF.1010 Monto transferido hacia la cuenta de : Vanesa Gutierrez obs:Pago adelantado');

/*Table structure for table `producto` */

DROP TABLE IF EXISTS `producto`;

CREATE TABLE `producto` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `Codigo` varchar(10) NOT NULL,
  `Nombre` varchar(100) DEFAULT NULL,
  `Descripcion` varchar(1000) DEFAULT NULL,
  `valor_venta` double DEFAULT NULL,
  `costo` double DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=utf8;

/*Data for the table `producto` */

insert  into `producto` values (2,'B4060','Bandeja enlozada lisa de 40x60cm','1mm de espesor, 2cm de altura',9500,6000),(3,'B6565','Bandeja enlozada lisa de 65x65cm','Bandeja enlozada lisa de 65x65',12000,9000),(4,'B6558','Bandeja enlozada lisa de 65x58cm ','bandeja lisa de 65x58cm ',12000,9000),(5,'B3555','Bandejas enlozada lisas de 35x55cm,1cm de altura','Bandejas enlozadas lisas nuevas de 35x55cm, de 1cm de altura',10000,6000),(7,'B6080','Bandeja enlozada lisa de 60x80cm. de 0.8mm. de espesor','Bandeja enlozada lisa de 60x80cm. de 0.8mm. de espesor, altura 1,8cm aproximadamente.',12000,9000),(8,'CTR1','Cortador redondo','Cortador redondo',5500,2500),(9,'US40','Uslero picador 40cm','Uslero picador 40cm',22000,15000),(10,'CARR6565','Carro bandejero capacidad 20 bandejas de 65x65','Carro bandejero capacidad 20 bandejas de 65x65',130000,100000),(11,'BP6181','Bandeja perforada de 61x81 de 0.8mm','Bandejas enlozadas perforadas de 61x81cm, de 0.8mm. de espesor',15500,12500),(12,'BD6181','Carro bandejero especial para 20 bandejas de 61x81','Carro bandejero especial para 20 bandejas de 61x81 de acero inxo. con ruedas, con separaciÃ³n de 9cm',200000,180000),(13,'BN7243','Bandeja enlozada lisa de 72x43,5 x3cm de altura','',12000,9000),(14,'BF608012','Bandeja de 60x80cm de Pan frica  de 12cm','Bandejas para pan de frica de 12cm. (24 unidades x bandeja), en 60x80cm',16500,14500),(15,'B6858','Bandejas enlozadas lisa de 68x58 de 0.8mm.','bandejas enlozadas lisa de 68x59de 0.8mm.',12000,9000),(16,'B8852','Bandeja enlozada de 88x52cm. en 1mm de espesor','Bandeja enlozada de 88x52cm. en 1mm de espesor',25000,10000),(17,'B6252','Bandeja enlozada lisa de 62x52','Bandejas enlozadas lisa de 62x52',12000,9000),(18,'CR10','Cortador hallulla 10cm','Cortador hallulla 10cm',7000,2500),(19,'CRESP','Cortador de hallulla especial','Cortador de hallulla especial',7000,2500),(20,'CR5','Cortador de canape','Cortador de canape',5000,1500),(21,'B5275 ','Bandeja enlozada lisa de 53x80','Bandeja enlozada lisa de 53x80',12000,9000),(22,'B6040','Bandeja enlozada lisa de 60x40cm.','Bandeja enlozada lisa de 60x40cm.',10000,6000),(23,'B5365','Bandeja enlozada lisa de 53x65cm. con manillas','Bandeja enlozada lisa de 53x65cm. con manillas',13500,9000),(24,'B5353M','Bandeja enlozada de 53,5x53,5cm. de 1mm. de espesor','Bandeja enlozada de 53,5x53,5cm. de 1mm. de espesor',13500,10000),(25,'CORE18','Cortador de empanadas  de 18cm. Zincado','Cortador de empanadas  de 18cm. Zincado',7000,4000),(26,'CORE20','Cortador de empanadas  de 20cm. Zincado','Cortador de empanadas  de 20cm. Zincado',7000,4000),(27,'B5643','Bandejas enlozadas  56x43cm.  de 0,8 mm. de espesor, x 1,5 cm de altura','Bandejas enlozadas  56x43cm.  de 0,8 mm. de espesor, x 1,5 cm de altura',11000,6000),(28,'B4370M','Bandeja enlozada lisa de 43x70 de 4cm. de altura con manillas','Bandeja enlozada lisa de 43x70 de 4cm. de altura con manillas',13500,9000);

/*Table structure for table `users` */

DROP TABLE IF EXISTS `users`;

CREATE TABLE `users` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `ip_address` varchar(15) NOT NULL,
  `username` varchar(100) NOT NULL,
  `password` varchar(255) NOT NULL,
  `salt` varchar(255) DEFAULT NULL,
  `email` varchar(100) NOT NULL,
  `activation_code` varchar(40) DEFAULT NULL,
  `forgotten_password_code` varchar(40) DEFAULT NULL,
  `forgotten_password_time` int(11) unsigned DEFAULT NULL,
  `remember_code` varchar(40) DEFAULT NULL,
  `created_on` int(11) unsigned NOT NULL,
  `last_login` int(11) unsigned DEFAULT NULL,
  `active` tinyint(1) unsigned DEFAULT NULL,
  `first_name` varchar(50) DEFAULT NULL,
  `last_name` varchar(50) DEFAULT NULL,
  `company` varchar(100) DEFAULT NULL,
  `phone` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

/*Data for the table `users` */

insert  into `users` values (1,'127.0.0.1','administrator','$2a$06$Euf0K4uVgbPEpMBOWqwfuuuRZV4pmSYY.NjlbRvbj.Lfqsj1DnMhm','','ventas@latasymoldes.com','','B6GXK9ZRkZJYB85AJi362e8c73be70cd42353f80',1506350015,'kiXQAFZdBC6mqL1KtZh9PO',1268889823,1507480432,1,'Admin','istrator','ADMIN','0');

/*Table structure for table `users_groups` */

DROP TABLE IF EXISTS `users_groups`;

CREATE TABLE `users_groups` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) unsigned NOT NULL,
  `group_id` mediumint(8) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uc_users_groups` (`user_id`,`group_id`),
  KEY `fk_users_groups_users1_idx` (`user_id`),
  KEY `fk_users_groups_groups1_idx` (`group_id`),
  CONSTRAINT `fk_users_groups_groups1` FOREIGN KEY (`group_id`) REFERENCES `groups` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `fk_users_groups_users1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

/*Data for the table `users_groups` */

insert  into `users_groups` values (1,1,1),(2,1,2);

/*Table structure for table `usuariocliente` */

DROP TABLE IF EXISTS `usuariocliente`;

CREATE TABLE `usuariocliente` (
  `id_usuario` int(11) unsigned NOT NULL,
  `id_cliente` int(11) NOT NULL,
  PRIMARY KEY (`id_usuario`,`id_cliente`),
  KEY `clienteusuario_cliente` (`id_cliente`),
  CONSTRAINT `clienteusuario_cliente` FOREIGN KEY (`id_cliente`) REFERENCES `cliente` (`id`),
  CONSTRAINT `clienteusuario_user1` FOREIGN KEY (`id_usuario`) REFERENCES `users` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `usuariocliente` */

/*Table structure for table `v_ResumenClientePedido` */

DROP TABLE IF EXISTS `v_ResumenClientePedido`;

/*!50001 DROP VIEW IF EXISTS `v_ResumenClientePedido` */;
/*!50001 DROP TABLE IF EXISTS `v_ResumenClientePedido` */;

/*!50001 CREATE TABLE  `v_ResumenClientePedido`(
 `id` int(11) ,
 `nom_cliente` varchar(100) ,
 `adr_cliente` varchar(100) ,
 `cant_pedidos` bigint(21) 
)*/;

/*Table structure for table `v_cabecera` */

DROP TABLE IF EXISTS `v_cabecera`;

/*!50001 DROP VIEW IF EXISTS `v_cabecera` */;
/*!50001 DROP TABLE IF EXISTS `v_cabecera` */;

/*!50001 CREATE TABLE  `v_cabecera`(
 `id` int(11) ,
 `est_esecuencia` int(11) ,
 `est_desc` varchar(50) ,
 `est_fec_estactual` datetime ,
 `est_fec_ing` datetime ,
 `diastranscurridos` int(7) ,
 `cli_id` int(11) ,
 `cli_nom` varchar(100) ,
 `ConFactura` tinyint(1) ,
 `comision` tinyint(1) 
)*/;

/*Table structure for table `v_cuentasdebehaber` */

DROP TABLE IF EXISTS `v_cuentasdebehaber`;

/*!50001 DROP VIEW IF EXISTS `v_cuentasdebehaber` */;
/*!50001 DROP TABLE IF EXISTS `v_cuentasdebehaber` */;

/*!50001 CREATE TABLE  `v_cuentasdebehaber`(
 `id_cabecera` int(11) ,
 `nombre_cta` varchar(200) ,
 `tipo` varchar(20) ,
 `debe` double ,
 `haber` double ,
 `saldo` double 
)*/;

/*Table structure for table `v_detallecuentas` */

DROP TABLE IF EXISTS `v_detallecuentas`;

/*!50001 DROP VIEW IF EXISTS `v_detallecuentas` */;
/*!50001 DROP TABLE IF EXISTS `v_detallecuentas` */;

/*!50001 CREATE TABLE  `v_detallecuentas`(
 `id_transaccion` int(11) ,
 `id_cuenta` int(10) ,
 `nombre_cuenta` varchar(200) ,
 `nro_pedido` int(11) ,
 `glosa` varchar(250) ,
 `fecha_ingreso` datetime ,
 `debe` double ,
 `haber` double 
)*/;

/*Table structure for table `v_indicadorespedido` */

DROP TABLE IF EXISTS `v_indicadorespedido`;

/*!50001 DROP VIEW IF EXISTS `v_indicadorespedido` */;
/*!50001 DROP TABLE IF EXISTS `v_indicadorespedido` */;

/*!50001 CREATE TABLE  `v_indicadorespedido`(
 `id_cabecera` int(11) ,
 `Subtotal` double ,
 `iva` double ,
 `totalAPagar` double ,
 `PagadoCLiente` double ,
 `SaldoCLiente` double ,
 `CostoTotal` double ,
 `AbonadoFabrica` double ,
 `SaldoFabrica` double ,
 `Ganancia100` double ,
 `recibidoVendedor1` double ,
 `gananciaVendedor1` double ,
 `SaldoVendedor1` double ,
 `recibidoVendedor2` double ,
 `gananciaVendedor2` double ,
 `SaldoVendedor2` double 
)*/;

/*Table structure for table `v_listadopedido` */

DROP TABLE IF EXISTS `v_listadopedido`;

/*!50001 DROP VIEW IF EXISTS `v_listadopedido` */;
/*!50001 DROP TABLE IF EXISTS `v_listadopedido` */;

/*!50001 CREATE TABLE  `v_listadopedido`(
 `nro_pedido` int(11) ,
 `nom_cliente` varchar(100) ,
 `est_sec` int(11) ,
 `nom_estado` varchar(50) ,
 `dat_actualizacion` datetime ,
 `Cliente` double ,
 `Haber` double ,
 `Debe` double ,
 `Costo` double ,
 `Venta` double ,
 `Ganancia` double 
)*/;

/*Table structure for table `v_listadopedidoextendido` */

DROP TABLE IF EXISTS `v_listadopedidoextendido`;

/*!50001 DROP VIEW IF EXISTS `v_listadopedidoextendido` */;
/*!50001 DROP TABLE IF EXISTS `v_listadopedidoextendido` */;

/*!50001 CREATE TABLE  `v_listadopedidoextendido`(
 `numeroPedido` int(11) ,
 `cli_id` int(11) ,
 `cli_nom` varchar(100) ,
 `estado_sec` int(11) ,
 `est_desc` varchar(50) ,
 `est_fec_estactual` datetime ,
 `comision` tinyint(1) ,
 `confactura` tinyint(1) ,
 `Subtotal` double ,
 `iva` double ,
 `totalAPagar` double ,
 `PagadoCLiente` double ,
 `SaldoCLiente` double ,
 `CostoTotal` double ,
 `SaldoFabrica` double ,
 `Ganancia100` double ,
 `diastranscurridos` int(7) ,
 `SaldoGanancia` double ,
 `recibidoVendedor1` double ,
 `recibidoVendedor2` double ,
 `SaldoVendedor1` double ,
 `SaldoVendedor2` double 
)*/;

/*Table structure for table `v_resumenclientepedido` */

DROP TABLE IF EXISTS `v_resumenclientepedido`;

/*!50001 DROP VIEW IF EXISTS `v_resumenclientepedido` */;
/*!50001 DROP TABLE IF EXISTS `v_resumenclientepedido` */;

/*!50001 CREATE TABLE  `v_resumenclientepedido`(
 `id` int(11) ,
 `nom_cliente` varchar(100) ,
 `adr_cliente` varchar(100) ,
 `cant_pedidos` bigint(21) 
)*/;

/*Table structure for table `v_saldoscuentapedido` */

DROP TABLE IF EXISTS `v_saldoscuentapedido`;

/*!50001 DROP VIEW IF EXISTS `v_saldoscuentapedido` */;
/*!50001 DROP TABLE IF EXISTS `v_saldoscuentapedido` */;

/*!50001 CREATE TABLE  `v_saldoscuentapedido`(
 `id_cabecera` int(11) ,
 `id` int(10) ,
 `nombre_cta` varchar(200) ,
 `tipo_cta` varchar(20) ,
 `Entidad` varchar(50) ,
 `saldo` double 
)*/;

/*Table structure for table `v_totalcuentapedido` */

DROP TABLE IF EXISTS `v_totalcuentapedido`;

/*!50001 DROP VIEW IF EXISTS `v_totalcuentapedido` */;
/*!50001 DROP TABLE IF EXISTS `v_totalcuentapedido` */;

/*!50001 CREATE TABLE  `v_totalcuentapedido`(
 `id_cabecera` int(11) ,
 `tipo0` double ,
 `tipo1` double ,
 `tipo2` double 
)*/;

/*Table structure for table `v_totaldetallepedido` */

DROP TABLE IF EXISTS `v_totaldetallepedido`;

/*!50001 DROP VIEW IF EXISTS `v_totaldetallepedido` */;
/*!50001 DROP TABLE IF EXISTS `v_totaldetallepedido` */;

/*!50001 CREATE TABLE  `v_totaldetallepedido`(
 `id` int(11) ,
 `id_cabecera` int(11) ,
 `id_prod` int(11) ,
 `cod_prod` varchar(10) ,
 `nom_prod` varchar(100) ,
 `des_prod` varchar(1000) ,
 `costo_un` double ,
 `venta_un` double ,
 `cantidad` decimal(32,0) ,
 `det_costo` double ,
 `det_venta` double ,
 `det_ganancia` double ,
 `det_ganancia_2` double 
)*/;

/*Table structure for table `v_totaldetallepedido1linea` */

DROP TABLE IF EXISTS `v_totaldetallepedido1linea`;

/*!50001 DROP VIEW IF EXISTS `v_totaldetallepedido1linea` */;
/*!50001 DROP TABLE IF EXISTS `v_totaldetallepedido1linea` */;

/*!50001 CREATE TABLE  `v_totaldetallepedido1linea`(
 `id_cabecera` int(11) ,
 `costo_tot` double ,
 `venta_tot` double ,
 `iva_tot` double ,
 `ganancia_tot` double ,
 `ganancia2_tot` double 
)*/;

/*View structure for view v_ResumenClientePedido */

/*!50001 DROP TABLE IF EXISTS `v_ResumenClientePedido` */;
/*!50001 DROP VIEW IF EXISTS `v_ResumenClientePedido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0`@`localhost` SQL SECURITY DEFINER VIEW `v_ResumenClientePedido` AS select `cli`.`id` AS `id`,`cli`.`nombre` AS `nom_cliente`,`cli`.`correo1` AS `adr_cliente`,count(`cab`.`id`) AS `cant_pedidos` from (`cliente` `cli` left join `cabecera` `cab` on((`cli`.`id` = `cab`.`id_cliente`))) group by `cli`.`id` */;

/*View structure for view v_cabecera */

/*!50001 DROP TABLE IF EXISTS `v_cabecera` */;
/*!50001 DROP VIEW IF EXISTS `v_cabecera` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_cabecera` AS select `cab`.`id` AS `id`,`est`.`secuencia` AS `est_esecuencia`,`est`.`descripcion` AS `est_desc`,`ce`.`fecha` AS `est_fec_estactual`,`cab`.`fecha_ingreso` AS `est_fec_ing`,(to_days(now()) - to_days(`cab`.`fecha_ingreso`)) AS `diastranscurridos`,`cli`.`id` AS `cli_id`,`cli`.`nombre` AS `cli_nom`,`cab`.`conFactura` AS `ConFactura`,`cab`.`comision` AS `comision` from (((`cabecera` `cab` join `cambioestado` `ce` on(((`cab`.`estadoActual` = `ce`.`id`) and (`cab`.`id` = `ce`.`id_cabecera`)))) join `estado` `est` on((`ce`.`estado` = `est`.`secuencia`))) join `cliente` `cli` on((`cab`.`id_cliente` = `cli`.`id`))) */;

/*View structure for view v_cuentasdebehaber */

/*!50001 DROP TABLE IF EXISTS `v_cuentasdebehaber` */;
/*!50001 DROP VIEW IF EXISTS `v_cuentasdebehaber` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_cuentasdebehaber` AS select `dp`.`id_cabecera` AS `id_cabecera`,`sal`.`nombre_cta` AS `nombre_cta`,`cta`.`Tipo` AS `tipo`,sum((case `cta`.`Tipo` when '0' then (`dp`.`venta_tot` + `dp`.`iva_tot`) when '1' then (case when (`cta`.`id` = `sal`.`id`) then `dp`.`ganancia2_tot` else 0 end) when '2' then (`dp`.`costo_tot` + `dp`.`iva_tot`) else 0 end)) AS `debe`,sum((case `cta`.`Tipo` when '0' then `sal`.`saldo` when '1' then (case when (`cta`.`id` = `sal`.`id`) then `sal`.`saldo` else 0 end) when '2' then `sal`.`saldo` else 0 end)) AS `haber`,sum(((case `cta`.`Tipo` when '0' then (`dp`.`venta_tot` + `dp`.`iva_tot`) when '1' then (case when (`cta`.`id` = `sal`.`id`) then `dp`.`ganancia2_tot` else 0 end) when '2' then (`dp`.`costo_tot` + `dp`.`iva_tot`) else 0 end) - (case `cta`.`Tipo` when '0' then `sal`.`saldo` when '1' then (case when (`cta`.`id` = `sal`.`id`) then `sal`.`saldo` else 0 end) when '2' then `sal`.`saldo` else 0 end))) AS `saldo` from ((`v_totaldetallepedido1linea` `dp` join `v_saldoscuentapedido` `sal` on((`dp`.`id_cabecera` = `sal`.`id_cabecera`))) join `cuenta` `cta` on((`sal`.`id` = `cta`.`id`))) group by `dp`.`id_cabecera`,`sal`.`nombre_cta` */;

/*View structure for view v_detallecuentas */

/*!50001 DROP TABLE IF EXISTS `v_detallecuentas` */;
/*!50001 DROP VIEW IF EXISTS `v_detallecuentas` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_detallecuentas` AS select `mov`.`id` AS `id_transaccion`,`cta`.`id` AS `id_cuenta`,`cta`.`Nombre` AS `nombre_cuenta`,`mov`.`id_cabecera` AS `nro_pedido`,`mov`.`glosa` AS `glosa`,`mov`.`fecha_ingreso` AS `fecha_ingreso`,(case when (`mov`.`monto` > 0) then `mov`.`monto` else 0 end) AS `debe`,(case when (`mov`.`monto` < 0) then `mov`.`monto` else 0 end) AS `haber` from (`movimiento_ctas` `mov` join `cuenta` `cta` on((`cta`.`id` = `mov`.`id_cuenta`))) order by `mov`.`id_cabecera`,`mov`.`fecha_ingreso` desc */;

/*View structure for view v_indicadorespedido */

/*!50001 DROP TABLE IF EXISTS `v_indicadorespedido` */;
/*!50001 DROP VIEW IF EXISTS `v_indicadorespedido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_indicadorespedido` AS select `tot_det`.`id_cabecera` AS `id_cabecera`,sum(`tot_det`.`venta_tot`) AS `Subtotal`,sum((case `cab`.`ConFactura` when 1 then (`tot_det`.`venta_tot` * 0.19) else 0 end)) AS `iva`,sum((`tot_det`.`venta_tot` + (case `cab`.`ConFactura` when 1 then (`tot_det`.`venta_tot` * 0.19) else 0 end))) AS `totalAPagar`,sum(`cta_tipo0`.`saldo`) AS `PagadoCLiente`,sum(((`tot_det`.`venta_tot` + (case `cab`.`ConFactura` when 1 then (`tot_det`.`venta_tot` * 0.19) else 0 end)) - ifnull(`cta_tipo0`.`saldo`,0))) AS `SaldoCLiente`,sum(`tot_det`.`costo_tot`) AS `CostoTotal`,sum(ifnull(`cta_tipo2`.`saldo`,0)) AS `AbonadoFabrica`,sum(((`tot_det`.`costo_tot` - ifnull(`cta_tipo2`.`saldo`,0)) + (case `cab`.`ConFactura` when 1 then (`tot_det`.`venta_tot` * 0.19) else 0 end))) AS `SaldoFabrica`,sum(`tot_det`.`ganancia_tot`) AS `Ganancia100`,sum(`cta_tipo1_1`.`saldo`) AS `recibidoVendedor1`,sum((case `cab`.`comision` when 0 then `tot_det`.`ganancia_tot` else `tot_det`.`ganancia2_tot` end)) AS `gananciaVendedor1`,sum(((case `cab`.`comision` when 0 then `tot_det`.`ganancia_tot` else `tot_det`.`ganancia2_tot` end) - `cta_tipo1_1`.`saldo`)) AS `SaldoVendedor1`,sum(ifnull(`cta_tipo1_2`.`saldo`,0)) AS `recibidoVendedor2`,sum((case `cab`.`comision` when 1 then `tot_det`.`ganancia2_tot` else 0 end)) AS `gananciaVendedor2`,sum(((case `cab`.`comision` when 1 then `tot_det`.`ganancia2_tot` else 0 end) - ifnull(`cta_tipo1_2`.`saldo`,0))) AS `SaldoVendedor2` from (((((`v_cabecera` `cab` join `v_totaldetallepedido1linea` `tot_det` on((`cab`.`id` = `tot_det`.`id_cabecera`))) left join `v_saldoscuentapedido` `cta_tipo0` on(((`tot_det`.`id_cabecera` = `cta_tipo0`.`id_cabecera`) and (`cta_tipo0`.`tipo_cta` = 0)))) left join `v_saldoscuentapedido` `cta_tipo2` on(((`tot_det`.`id_cabecera` = `cta_tipo2`.`id_cabecera`) and (`cta_tipo2`.`tipo_cta` = 2)))) left join `v_saldoscuentapedido` `cta_tipo1_1` on(((`tot_det`.`id_cabecera` = `cta_tipo1_1`.`id_cabecera`) and (`cta_tipo1_1`.`tipo_cta` = 1) and (`cta_tipo1_1`.`Entidad` = 'VEN1')))) left join `v_saldoscuentapedido` `cta_tipo1_2` on(((`tot_det`.`id_cabecera` = `cta_tipo1_2`.`id_cabecera`) and (`cta_tipo1_2`.`tipo_cta` = 1) and (`cta_tipo1_2`.`Entidad` = 'VEN2')))) group by `tot_det`.`id_cabecera` */;

/*View structure for view v_listadopedido */

/*!50001 DROP TABLE IF EXISTS `v_listadopedido` */;
/*!50001 DROP VIEW IF EXISTS `v_listadopedido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_listadopedido` AS select `cab`.`id` AS `nro_pedido`,`cab`.`cli_nom` AS `nom_cliente`,`cab`.`est_esecuencia` AS `est_sec`,`cab`.`est_desc` AS `nom_estado`,`cab`.`est_fec_estactual` AS `dat_actualizacion`,sum(`tot_cta`.`tipo0`) AS `Cliente`,sum(`tot_cta`.`tipo1`) AS `Haber`,sum(`tot_cta`.`tipo2`) AS `Debe`,sum(`tot_det`.`det_costo`) AS `Costo`,sum(`tot_det`.`det_venta`) AS `Venta`,sum(`tot_det`.`det_ganancia`) AS `Ganancia` from ((`v_cabecera` `cab` join `v_totalcuentapedido` `tot_cta` on((`cab`.`id` = `tot_cta`.`id_cabecera`))) join `v_totaldetallepedido` `tot_det` on((`cab`.`id` = `tot_det`.`id_cabecera`))) group by `cab`.`id`,`cab`.`cli_nom`,`cab`.`est_desc`,`cab`.`est_fec_estactual`,`cab`.`est_esecuencia` */;

/*View structure for view v_listadopedidoextendido */

/*!50001 DROP TABLE IF EXISTS `v_listadopedidoextendido` */;
/*!50001 DROP VIEW IF EXISTS `v_listadopedidoextendido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_listadopedidoextendido` AS select `cab`.`id` AS `numeroPedido`,`cab`.`cli_id` AS `cli_id`,`cab`.`cli_nom` AS `cli_nom`,`cab`.`est_esecuencia` AS `estado_sec`,`cab`.`est_desc` AS `est_desc`,`cab`.`est_fec_estactual` AS `est_fec_estactual`,`cab`.`comision` AS `comision`,`cab`.`ConFactura` AS `confactura`,`ind`.`Subtotal` AS `Subtotal`,`ind`.`iva` AS `iva`,`ind`.`totalAPagar` AS `totalAPagar`,ifnull(`ind`.`PagadoCLiente`,0) AS `PagadoCLiente`,ifnull(`ind`.`SaldoCLiente`,0) AS `SaldoCLiente`,ifnull(`ind`.`CostoTotal`,0) AS `CostoTotal`,ifnull(`ind`.`SaldoFabrica`,0) AS `SaldoFabrica`,ifnull(`ind`.`Ganancia100`,0) AS `Ganancia100`,(to_days(now()) - to_days(`cab`.`est_fec_ing`)) AS `diastranscurridos`,(ifnull(`ind`.`Ganancia100`,0) - (ifnull(`ind`.`recibidoVendedor1`,0) + ifnull(`ind`.`recibidoVendedor2`,0))) AS `SaldoGanancia`,ifnull(`ind`.`recibidoVendedor1`,0) AS `recibidoVendedor1`,ifnull(`ind`.`recibidoVendedor2`,0) AS `recibidoVendedor2`,ifnull(`ind`.`SaldoVendedor1`,0) AS `SaldoVendedor1`,ifnull(`ind`.`SaldoVendedor2`,0) AS `SaldoVendedor2` from (`v_indicadorespedido` `ind` join `v_cabecera` `cab` on((`cab`.`id` = `ind`.`id_cabecera`))) order by `cab`.`id` desc */;

/*View structure for view v_resumenclientepedido */

/*!50001 DROP TABLE IF EXISTS `v_resumenclientepedido` */;
/*!50001 DROP VIEW IF EXISTS `v_resumenclientepedido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_resumenclientepedido` AS select `cli`.`id` AS `id`,`cli`.`nombre` AS `nom_cliente`,`cli`.`correo1` AS `adr_cliente`,count(`cab`.`id`) AS `cant_pedidos` from (`cliente` `cli` left join `cabecera` `cab` on((`cli`.`id` = `cab`.`id_cliente`))) group by `cli`.`id` */;

/*View structure for view v_saldoscuentapedido */

/*!50001 DROP TABLE IF EXISTS `v_saldoscuentapedido` */;
/*!50001 DROP VIEW IF EXISTS `v_saldoscuentapedido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_saldoscuentapedido` AS select `mov`.`id_cabecera` AS `id_cabecera`,`cta`.`id` AS `id`,`cta`.`Nombre` AS `nombre_cta`,`cta`.`Tipo` AS `tipo_cta`,`cta`.`Entidad` AS `Entidad`,sum(`mov`.`monto`) AS `saldo` from (`movimiento_ctas` `mov` join `cuenta` `cta` on((`mov`.`id_cuenta` = `cta`.`id`))) group by `mov`.`id_cabecera`,`cta`.`id`,`cta`.`Nombre`,`cta`.`Tipo`,`cta`.`Entidad` order by `cta`.`Tipo` */;

/*View structure for view v_totalcuentapedido */

/*!50001 DROP TABLE IF EXISTS `v_totalcuentapedido` */;
/*!50001 DROP VIEW IF EXISTS `v_totalcuentapedido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_totalcuentapedido` AS (select `mov`.`id_cabecera` AS `id_cabecera`,sum((case `cta1`.`Tipo` when 0 then `mov`.`monto` else 0 end)) AS `tipo0`,sum((case `cta1`.`Tipo` when 1 then `mov`.`monto` else 0 end)) AS `tipo1`,sum((case `cta1`.`Tipo` when 2 then `mov`.`monto` else 0 end)) AS `tipo2` from (`movimiento_ctas` `mov` join `cuenta` `cta1` on((`mov`.`id_cuenta` = `cta1`.`id`))) group by `mov`.`id_cabecera`) */;

/*View structure for view v_totaldetallepedido */

/*!50001 DROP TABLE IF EXISTS `v_totaldetallepedido` */;
/*!50001 DROP VIEW IF EXISTS `v_totaldetallepedido` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_totaldetallepedido` AS select `det`.`id` AS `id`,`det`.`id_cabecera` AS `id_cabecera`,`det`.`id_producto` AS `id_prod`,`pro`.`Codigo` AS `cod_prod`,`pro`.`Nombre` AS `nom_prod`,`pro`.`Descripcion` AS `des_prod`,`det`.`costo` AS `costo_un`,`det`.`valor_cli` AS `venta_un`,sum(`det`.`cantidad`) AS `cantidad`,sum((`det`.`costo` * `det`.`cantidad`)) AS `det_costo`,sum((`det`.`valor_cli` * `det`.`cantidad`)) AS `det_venta`,sum(((`det`.`valor_cli` * `det`.`cantidad`) - (`det`.`costo` * `det`.`cantidad`))) AS `det_ganancia`,sum((((`det`.`valor_cli` * `det`.`cantidad`) - (`det`.`costo` * `det`.`cantidad`)) / (case `cab`.`comision` when 1 then 2 when 0 then 1 end))) AS `det_ganancia_2` from ((`detalle` `det` join `producto` `pro` on((`det`.`id_producto` = `pro`.`id`))) join `cabecera` `cab` on((`cab`.`id` = `det`.`id_cabecera`))) group by `det`.`id_cabecera`,`det`.`id_producto`,`pro`.`Codigo`,`pro`.`Nombre`,`pro`.`Descripcion`,`det`.`id`,`det`.`costo`,`det`.`valor_cli` */;

/*View structure for view v_totaldetallepedido1linea */

/*!50001 DROP TABLE IF EXISTS `v_totaldetallepedido1linea` */;
/*!50001 DROP VIEW IF EXISTS `v_totaldetallepedido1linea` */;

/*!50001 CREATE ALGORITHM=UNDEFINED DEFINER=`ef3c71v0_joc`@`190.46.77.25` SQL SECURITY DEFINER VIEW `v_totaldetallepedido1linea` AS select `v_det`.`id_cabecera` AS `id_cabecera`,sum(`v_det`.`det_costo`) AS `costo_tot`,sum(`v_det`.`det_venta`) AS `venta_tot`,sum((`v_det`.`det_venta` * (case `cab`.`ConFactura` when 1 then 0.19 else 0 end))) AS `iva_tot`,sum(`v_det`.`det_ganancia`) AS `ganancia_tot`,sum(`v_det`.`det_ganancia_2`) AS `ganancia2_tot` from (`v_totaldetallepedido` `v_det` join `v_cabecera` `cab` on((`v_det`.`id_cabecera` = `cab`.`id`))) group by `v_det`.`id_cabecera` */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
