
<?php
defined('BASEPATH') or exit('No direct script access allowed');

/*
 * Controlar de Seguimientos
 */
class Woo extends CI_Controller
{

    public function Index()
    {
        
            //$data = $this->M_Woo->get_dato_pedido(162,"_billing_first_name");
        
        
        
        $this->Ver();
        
    }
    
    
    public function Ver()
    {
        $dataContent['titleHeader']  =  "Sistema de seguimiento de pedidos ONLINE.";
        $dataContent['descHeader']   =  "Pedidos desde Woo Comerce";
        //$dataContent['clienteswoo'] = $data;
        
        $this->load->template('v_woo_importar', $dataContent);
        
    }
    
    public function listadoClientesWoo(){
        
        if (! $this->ion_auth->logged_in()) {
            redirect('auth/login');
        }
        
        $json = file_get_contents('php://input');
        $obj = json_decode($json);
        
        isset($obj->search) ? $criterio = $obj->search : $criterio = "";
        
        
        $this->load->model('M_Woo');
        $data = $this->M_Woo->get_listado_clientes_pedido($criterio);
        $data2 ['rows'] = $data;
        echo json_encode($data);
    }
    
    
    
    public function detallePedidoWoo(){
        
        if (! $this->ion_auth->logged_in()) {
            redirect('auth/login');
        }
        
        $json = file_get_contents('php://input');
        $obj = json_decode($json);
        
        isset($obj->idwoo) ? $idwoo = $obj->idwoo : $idwoo = -1;
        
        
        $this->load->model('M_Woo');
        $data = $this->M_Woo->get_detalle_pedido($idwoo);
        echo json_encode($data);
    }
    
    
    
    public function importarClienteWoo()
    {
        
        
        $idclie = $this->input->post('idcliente');
        $nombre = ucwords (strtolower($this->input->post('txt_nombre')));
        $correo = strtolower($this->input->post('txt_correo'));
        $nombr2 = ucwords (strtolower($this->input->post('txt_nombre2')));
        $corre2 = strtolower($this->input->post('txt_correo2'));
        $fono1  = $this->input->post('txt_fono1');
        $fono2  = $this->input->post('txt_fono2');
        $rut    = $this->input->post('txt_rut');
        $giro   = $this->input->post('txt_giro');
        $direc  = $this->input->post('txt_domicilio');
        $comuna = $this->input->post('txt_comuna');
        $obs    = $this->input->post('txt_observaciones');
        
    }
    
    
    
    
    
}
